МОДУЛЬ ЛИФТА
============================

Минимальные требования
------------

* PHP: >=7.0.1
* MySQL: >=5.7.11 *(подойдет любая другая СУБД, поддеживаемая Yii2)*


Установка
------------

* Склонировать репозиторий проекта: https://github.com/a6ka/elevator.git
* Перейти в директорию проекта и выполнить загрузку пакетов:
~~~
php composer.phar global require "fxp/composer-asset-plugin:^1.3.1"
php composer.phar update
~~~
* Предоставить права 777 директориям:
  * web/assets 
  * runtime 
* Настроить соединение с БД *(описание ниже)*
* Запустить миграцию командой *(находясь в корне проекта)*:
~~~
php yii migrate
~~~
* настроить вируальный хост *(в зависимости от системы)*

Конфигурация
-------------

### БД

Измените фаил `config/db.php`, внеся реальные данные, например:

```php
return [
    'class' => 'yii\db\Connection',
    'dsn' => 'mysql:host=localhost;dbname=yii2basic',
    'username' => 'root',
    'password' => '1234',
    'charset' => 'utf8',
];
```

### Параметры здания и лифта
Измените фаил `config/params.php`, внеся необходимые данные, например:

```php
return [
    'building' => [
        'floors' => 4,
        'floorHeight' => 4,
    ],
    'elevator' => [
        'startFloor' => 1,
        'speed' => 1,
        'maxWeight' => 700,
    ],
];
```

**ЗАМЕТКИ:**
- Yii **не создает** БД, это необходимо сделать самостоятельно.

Как это работает
-------------
### Главная страница

Содержит:
* Кнопки быстрой загрузки сценариев
* Форму добавления заданий
* Таблицу текущих заданий с фильтрами

**ЗАМЕТКИ:**
- Таблица обновляется при помощи AJAX c с периодичностью **1 секунда** (интервал можно изменить в файле `web/js/main.js`)
- Приложение позволяет "подбрасывать" задачи на лету. Если скрипт лифта не завершил работу - данные задачи будут обработаны.
- Реализована возможность ввода произвольного веса пассажира. 

### Скрипт инициализации лифта
Лифт запускается через CLI *(в дальнейшем планирую дописать скрипт демона, поэтому изначально писал для запуска через консоль)*.

Для запуска выполните команду из директории проекта:
~~~
php yii elevator
~~~



Автор
-------------------
Полтавец Александр

TODO:
-------------------
- переписать скрипт под демона